---
import PropertyDetails from "@/components/astro/PropertyDetails.astro";
import { db, Properties, eq } from "astro:db";

export async function getStaticPaths() {
  // obtener todos los slugs desde Astro DB
  const all = await db.select().from(Properties);

  return all.map((p) => ({
    params: { slug: p.slug },
    props: { property: p }, // se env√≠a al componente
  }));
}

const { property } = Astro.props;
---
<div>
  <PropertyDetails property={property} />
</div>





<!-- SSG -->

<!-- ---
import type { GetStaticPaths } from "astro";
import { getCollection } from "astro:content";
import listings from '@/data/listings.json';  
import PropertyDetails from "@/components/astro/PropertyDetails.astro";

// retrieve all listings from the json data
export const getStaticPaths: GetStaticPaths = async () => {
  return listings.map((listing) => ({
    params: { slug: listing.slug },
    props: { listing },
  }));
};  

// Desestructura la propiedad individual
const { listing } = Astro.props;
---

<div>

  <PropertyDetails property={listing} />
</div> -->
